---
---

<!DOCTYPE html>
<html>
<head>
	<title>Explore</title>

    <link rel="stylesheet" href="{{ site.baseurl }}/assets/css/explore.css">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <div id="header"></div>


    <center><h1>Albums</h1></center>

    <div id="albumImg"></div>

</body>
</html>

<script>

    let album = {};


    async function info() {
        var getUrl = "https://taylorswifties.duckdns.org/api/users/output";

        var getOptions = {
            method: 'GET', 
            mode: 'cors', 
            cache: 'default', 
            //credentials: 'include', 
            headers: {
                'Content-Type': 'application/json',
            },
        };


        let response = await fetch(getUrl, getOptions)
        
        if (!response["ok"]) {
            console.log("Error");
            return;
        }

        let data = await response.json();
        console.log(response.status);
        return data; 
    }


    // selection sort
    async function sort() {
        let data = await info();
        console.log(data);

        //console.log(data["albums"]);

        //let album = {};

        for (let i = 0; i < data["albums"]["items"].length; i++) {
            //console.log(data["albums"]["items"][i]);

            let info = {"album": data["albums"]["items"][i]["name"], "date": data["albums"]["items"][i]["date"], "img": data["albums"]["items"][i]["cover"][0]["url"]};

            album[i] = info;                    
        }

        console.log(album);

        
        console.log(Object.keys(album).length);

        for (let i = 0; i < Object.keys(album).length; i++) {
            let index = i; 
            let leastValue = album[i]["date"];

            for (let j = i + 1; j < Object.keys(album).length; j++) {
                let currentValue = album[j]["date"];
                if (leastValue.localeCompare(currentValue) === 1) {
                    index = j;
                    leastValue = currentValue;
                }
            }

            let info = {"album": album[index]["album"], "date": album[index]["date"], "img": album[index]["img"]};
            let originalInfo = {"album": album[i]["album"], "date": album[i]["date"], "img": album[i]["img"]};
            album[i] = info;
            album[index] = originalInfo;
        }

        console.log(album);
        
    }

    function show() {
        console.log(album);


        for (let i = 0; i < Object.keys(album).length; i++) {
            let img = document.createElement("img");
            img.setAttribute("class", "imgResponse");
            img.setAttribute("src", album[i]["img"]);
            document.getElementById("albumImg").appendChild(img);
        }        



    }

    async function init() {
        await sort();
        await show();
    }

    init();
</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
<script>$("#header").load("{{ site.baseurl }}/header.html");</script>